{"version":3,"file":"index.js","names":[],"sources":["../src/index.ts"],"sourcesContent":["/**\n * Options type.\n */\ntype OptionsType = {\n  /**\n   * The space between bottom of the {@link https://developer.mozilla.org/en-US/docs/Glossary/Viewport|viewport} and bottom of the `visible area`.\n   * @default 0\n   */\n  spaceBottom?: number;\n  /**\n   * The space between top of the {@link https://developer.mozilla.org/en-US/docs/Glossary/Viewport|viewport} and top of the `visible area`.\n   * @default 0\n   */\n  spaceTop?: number;\n  /**\n   * Default {@link https://developer.mozilla.org/en-US/docs/Web/CSS/position|position} for the target {@link StickNRoll.containerInner|containerInner}. This property is set when the disable method is called.\n   * @default 'initial'\n   */\n  position?: CSSStyleDeclaration['position'];\n};\n\n/**\n * The element coordinates.\n */\ntype TypeElementCoords = {\n  left: number;\n  top: number;\n};\n\n/**\n * Indexes of events in the events array.\n */\nenum Item {\n  Resize = 0,\n  Scroll = 1,\n}\n\n/**\n * Defines `viewport` direction.\n */\nenum Direction {\n  Down,\n  None,\n  Up,\n}\n\n/**\n * Strategy.\n */\nenum Strategy {\n  /**\n   * Sticky both sides by Y-axis.\n   */\n  Both,\n  /**\n   * Nothing do.\n   */\n  None,\n  /**\n   * Sticky only top side.\n   */\n  Top,\n}\n\n/**\n * @enum {number} Position variant of target {@link StickNRoll.containerInner|containerInner}.\n */\nenum State {\n  /**\n   * {@link StickNRoll.containerInner|containerInner} affixed at the bottom of the {@link StickNRoll.container|container}.\n   */\n  ContainerBottom,\n  /**\n   * {@link StickNRoll.containerInner|containerInner} fixed at the top of the window viewport area (including {@link OptionsType.spaceTop|spaceTop}).\n   */\n  ColliderTop,\n  /**\n   * {@link StickNRoll.containerInner|containerInner} fixed at the bottom of the window viewport area (including {@link OptionsType.spaceBottom|spaceBottom}).\n   */\n  ColliderBottom,\n  /**\n   * Default {@link StickNRoll.containerInner|containerInner} behavior. Case without specific {@link Rules|rules}.\n   */\n  None,\n  /**\n   * The {@link StickNRoll.containerInner|containerInner} is offset along the Y axis relative to the {@link StickNRoll.container|container}.\n   */\n  TranslateY,\n  /**\n   * Indicates that rendering should be skipped until the state changes.\n   */\n  Rest,\n}\n\ntype Rules = Pick<CSSStyleDeclaration, 'width' | 'left' | 'top' | 'position' | 'transform'>;\n\n/**\n * stick-n-roll - helps to give an element sticky scrolling capability.\n * @version 1.1.2\n * @link https://github.com/devashtar/stick-n-roll\n * @author devashtar <omg.michael.here@gmail.com>\n * @license The MIT License (MIT)\n */\nexport class StickNRoll {\n  /**\n   * Parent element of {@link containerInner}.\n   */\n  private container: HTMLElement;\n\n  /**\n   * Target element with sticky and scroll abilities.\n   */\n  private containerInner: HTMLElement;\n\n  /**\n   * Triggered Event.\n   */\n  private events: [Boolean, Boolean];\n\n  /**\n   * Indicates that a render request has already been initiated.\n   * @default false\n   */\n  private isRunningRequest: boolean;\n\n  /**\n   * The Current Y-axis coordinates relative to the {@link container}.\n   */\n  private translateY: number;\n\n  /**\n   * The maximum allowed Y-axis coordinates relative to the {@link container}.\n   */\n  private maxTranslateY: number;\n\n  /**\n   * Previous {@link containerInner} height.\n   */\n  private prevElementHeight: number;\n\n  /**\n   * Height of the {@link container}.\n   */\n  private containerHeight: number;\n\n  /**\n   * Width of the {@link container}.\n   */\n  private containerWidth: number;\n\n  /**\n   * Coordinate by X-axis of the {@link container}.\n   */\n  private containerLeft: number;\n\n  /**\n   * Coordinate by Y-axis of the {@link container}.\n   */\n  private containerTop: number;\n\n  /**\n   * Previous width of the {@link container}.\n   */\n  private prevContainerWidth: number;\n\n  /**\n   * Previous coordinate by X-axis of the {@link container}.\n   */\n  private prevContainerLeft: number;\n\n  /**\n   * Previous coordinate by Y-axis of the {@link container}.\n   */\n  private prevContainerTop: number;\n\n  /**\n   * Height of the {@link collider}.\n   */\n  private colliderHeight: number;\n\n  /**\n   * Top coordinate of the {@link collider}.\n   */\n  private colliderTop: number;\n\n  /**\n   * Previous top coordinate of the {@link collider}.\n   */\n  private prevColliderTop: number;\n\n  /**\n   * Previous coordinate by X-axis of the {@link https://developer.mozilla.org/en-US/docs/Glossary/Viewport|viewport}.\n   */\n  private prevViewportScrollX: number;\n\n  /**\n   * Previous coordinate by Y-axis of the {@link https://developer.mozilla.org/en-US/docs/Glossary/Viewport|viewport}.\n   */\n  private prevViewportScrollY: number;\n\n  /**\n   * Space top.\n   * @default 0\n   */\n  private spaceTop: number;\n\n  /**\n   * Previous space top.\n   * @default 0\n   */\n  private prevSpaceTop: number;\n\n  /**\n   * Space bottom.\n   * @default 0\n   */\n  private spaceBottom: number;\n\n  /**\n   * Previous space bottom.\n   * @default 0\n   */\n  private prevSpaceBottom: number;\n\n  /**\n   *  Resize observer.\n   */\n  private resizeObserver: ResizeObserver;\n\n  /**\n   * Current strategy. Helps to detect {@link containerInner} behaviour.\n   * @default Strategy.None\n   */\n  private strategy: Strategy;\n\n  /**\n   * Previous strategy.\n   * @default Strategy.None\n   */\n  private prevStrategy: Strategy;\n\n  /**\n   * Previous state.\n   * @default Variant.None\n   */\n  private prevState: State;\n\n  /**\n   * List of available CSS properties. Also is used as default values for rules.\n   */\n  private listOfRules: Rules;\n\n  /**\n   * List of css properties to be updated.\n   */\n  private rules: Partial<Rules>;\n\n  /**\n   * @param {HTMLElement} container - The parent element({@link container}) of {@link containerInner}.\n   * @param {HTMLElement} containerInner - The {@link containerInner} which will be endowed with stickiness and scrolling abilities relative to its parent element({@link container}).\n   */\n  constructor(container: HTMLElement, containerInner: HTMLElement, options?: OptionsType) {\n    this.container = container;\n    this.containerInner = containerInner;\n    this.prevSpaceBottom = options?.spaceBottom ?? 0;\n    this.prevSpaceTop = options?.spaceTop ?? 0;\n    this.spaceBottom = options?.spaceBottom ?? 0;\n    this.spaceTop = options?.spaceTop ?? 0;\n    this.listOfRules = {\n      width: 'initial',\n      left: 'initial',\n      top: 'initial',\n      position: options?.position ?? 'initial',\n      transform: 'initial',\n    };\n\n    this.colliderHeight = 0;\n    this.colliderTop = 0;\n    this.containerHeight = 0;\n    this.containerLeft = 0;\n    this.containerTop = 0;\n    this.containerWidth = 0;\n    this.events = [false, false];\n    this.isRunningRequest = false;\n    this.maxTranslateY = 0;\n    this.prevColliderTop = 0;\n    this.prevContainerLeft = 0;\n    this.prevContainerTop = 0;\n    this.prevContainerWidth = 0;\n    this.prevElementHeight = 0;\n    this.prevState = State.None;\n    this.prevStrategy = Strategy.None;\n    this.prevViewportScrollX = 0;\n    this.prevViewportScrollY = 0;\n    this.rules = {};\n    this.strategy = Strategy.None;\n    this.translateY = 0;\n\n    this._calcDims = this._calcDims.bind(this);\n    this._calcScroll = this._calcScroll.bind(this);\n    this._resizeListener = this._resizeListener.bind(this);\n    this._scrollListener = this._scrollListener.bind(this);\n    this.resizeObserver = new ResizeObserver(this._resizeListener);\n  }\n\n  /**\n   * Enable sticky scrolling capability. Use {@link disable} method to deactivate sticky scrolling capability.\n   */\n  public enable(): void {\n    this._addListeners(); // calls _calcDims method by default, cause is used ResizeObserver\n  }\n\n  /**\n   * Disable sticky scrolling capability. Use {@link enable} method to activate sticky scrolling capability again.\n   */\n  public disable(): void {\n    this._removeListeners();\n    this._init();\n    this._render(State.None);\n  }\n\n  /**\n   *  Update {@link spaceBottom} and {@link spaceTop}. It fires the render after changes of spaces.\n   */\n  public updateSpaces(spaces: Pick<OptionsType, 'spaceBottom' | 'spaceTop'>): void {\n    this.spaceBottom = spaces.spaceBottom ?? 0;\n    this.spaceTop = spaces.spaceTop ?? 0;\n    this._init();\n    this._resizeListener();\n  }\n\n  /**\n   * Initialize(reset) properties to default values.\n   */\n  private _init(): void {\n    this.colliderHeight = 0;\n    this.colliderTop = 0;\n    this.containerHeight = 0;\n    this.containerLeft = 0;\n    this.containerTop = 0;\n    this.containerWidth = 0;\n    this.events = [false, false];\n    this.isRunningRequest = false;\n    this.maxTranslateY = 0;\n    this.prevColliderTop = 0;\n    this.prevContainerLeft = 0;\n    this.prevContainerTop = 0;\n    this.prevContainerWidth = 0;\n    this.prevElementHeight = 0;\n    this.prevState = State.None;\n    this.prevStrategy = Strategy.None;\n    this.prevViewportScrollX = 0;\n    this.prevViewportScrollY = 0;\n    this.rules = {};\n    this.strategy = Strategy.None;\n    this.translateY = 0;\n  }\n\n  /**\n   * Resize listener.\n   */\n  private _resizeListener(): void {\n    if (this.events[Item.Resize] === false) this.events[Item.Resize] = true;\n    this._request();\n  }\n\n  /**\n   * Scroll listener.\n   */\n  private _scrollListener(): void {\n    if (this.events[Item.Scroll] === false) this.events[Item.Scroll] = true;\n    this._request();\n  }\n\n  /**\n   * Get coordinates for passed element.\n   */\n  private _getCoords(element: HTMLElement): TypeElementCoords {\n    const coords = { left: element.offsetLeft, top: element.offsetTop };\n    while (((element as unknown) = 'BODY' === element.tagName ? element.parentElement : element.offsetParent)) {\n      coords.top += element.offsetTop;\n      coords.left += element.offsetLeft;\n    }\n    return coords;\n  }\n\n  /**\n   * Update styles in {@link containerInner} and {@link container}.\n   */\n  private _render(state: State): void {\n    if (state === State.ContainerBottom) {\n      this.translateY = this.maxTranslateY;\n      this.rules = {\n        top: this.spaceTop + 'px',\n        left: '0px',\n        position: 'sticky',\n        width: this.container.clientWidth + 'px',\n      };\n    } else if (state === State.ColliderBottom) {\n      this.translateY = 0;\n      this.rules = {\n        top: this.colliderHeight + this.spaceTop - this.containerInner.offsetHeight + 'px',\n        left: this.containerLeft - window.scrollX + 'px',\n        position: 'fixed',\n        width: this.container.clientWidth + 'px',\n      };\n    } else if (state === State.ColliderTop) {\n      this.translateY = 0;\n      this.rules = {\n        top: this.spaceTop + 'px',\n        left: this.containerLeft - window.scrollX + 'px',\n        position: 'fixed',\n        width: this.container.clientWidth + 'px',\n      };\n    } else if (state === State.None) {\n      this.translateY = 0;\n      this.rules = {};\n    } else if (state === State.TranslateY) {\n      if (this.prevState === State.ColliderTop) {\n        this.translateY = this.prevColliderTop - this.containerTop;\n      } else if (this.prevState === State.ColliderBottom) {\n        this.translateY = this.prevColliderTop + this.colliderHeight - this.containerTop - this.prevElementHeight;\n      } else if (this.prevState === State.ContainerBottom) {\n        this.translateY = this.containerHeight - this.containerInner.offsetHeight;\n      }\n      this.rules = {\n        position: 'relative',\n        transform: `translate3d(0px, ${this.translateY}px, 0px)`,\n      };\n    }\n\n    this.container.style.position = state === State.ContainerBottom ? 'relative' : 'initial';\n\n    for (const key in this.listOfRules) {\n      this.containerInner.style[key as keyof Rules] =\n        this.rules[key as unknown as keyof Rules] ?? this.listOfRules[key as unknown as keyof Rules];\n    }\n  }\n\n  /**\n   * Get the scroll direction. `None` for horizontal scrolling or no scrolling.\n   */\n  private _getDirection(): Direction {\n    if (this.prevViewportScrollY === window.scrollY) return Direction.None;\n    return this.prevViewportScrollY < window.scrollY ? Direction.Down : Direction.Up;\n  }\n\n  /**\n   * Get state of {@link containerInner}.\n   */\n  private _getState(direction: Direction): State {\n    if (this.prevState === State.ColliderTop) {\n      if (this.colliderTop <= this.containerTop) {\n        return State.None;\n      }\n      if (this.colliderTop + this.containerInner.offsetHeight >= this.containerTop + this.containerHeight) {\n        return State.ContainerBottom;\n      }\n      if (this.prevStrategy === Strategy.Top && this.containerInner.offsetHeight > this.colliderHeight) {\n        this.prevStrategy = this.strategy;\n        return State.TranslateY;\n      }\n      if (this.strategy === Strategy.Both && direction === Direction.Down) {\n        return State.TranslateY;\n      }\n      if (\n        this.prevViewportScrollX !== window.scrollX ||\n        this.prevContainerLeft !== this.containerLeft ||\n        this.prevContainerWidth !== this.containerWidth ||\n        this.prevContainerTop !== this.containerTop ||\n        this.prevSpaceBottom !== this.spaceBottom ||\n        this.prevSpaceTop !== this.spaceTop\n      ) {\n        return State.ColliderTop;\n      }\n    } else if (this.prevState === State.ColliderBottom) {\n      if (this.colliderTop <= this.containerTop) {\n        return State.None;\n      }\n      if (this.colliderTop + this.colliderHeight >= this.containerTop + this.containerHeight) {\n        return State.ContainerBottom;\n      }\n      if (this.containerInner.offsetHeight <= this.colliderHeight) {\n        return State.ColliderTop;\n      }\n      if (direction === Direction.Up || this.prevElementHeight !== this.containerInner.offsetHeight) {\n        return State.TranslateY;\n      }\n      if (\n        this.prevViewportScrollX !== window.scrollX ||\n        this.prevContainerLeft !== this.containerLeft ||\n        this.prevContainerWidth !== this.containerWidth ||\n        this.prevContainerTop !== this.containerTop ||\n        this.prevSpaceBottom !== this.spaceBottom ||\n        this.prevSpaceTop !== this.spaceTop\n      ) {\n        return State.ColliderBottom;\n      }\n    } else if (this.prevState === State.ContainerBottom) {\n      if (this.colliderTop <= this.containerTop) {\n        return State.None;\n      }\n      if (direction === Direction.Up && this.colliderTop <= this.containerTop + this.maxTranslateY) {\n        return State.ColliderTop;\n      }\n      if (this.containerInner.offsetHeight < this.containerTop + this.containerHeight - this.colliderTop) {\n        return State.ColliderTop;\n      }\n      if (this.prevContainerWidth !== this.containerWidth) {\n        return State.ContainerBottom;\n      }\n    } else if (this.prevState === State.None) {\n      if (this.colliderTop + this.containerInner.offsetHeight >= this.containerTop + this.containerHeight) {\n        return State.ContainerBottom;\n      }\n      if (this.containerInner.offsetHeight < this.colliderHeight && this.colliderTop >= this.containerTop) {\n        return State.ColliderTop;\n      }\n      if (\n        this.strategy === Strategy.Both &&\n        this.colliderTop + this.colliderHeight >= this.containerTop + this.containerInner.offsetHeight\n      ) {\n        return State.ColliderBottom;\n      }\n    } else if (this.prevState === State.TranslateY) {\n      if (this.containerHeight - this.translateY < this.containerInner.offsetHeight) {\n        return State.ContainerBottom;\n      }\n      if (\n        this.containerInner.offsetHeight < this.colliderHeight ||\n        this.colliderTop <= this.containerTop + this.translateY\n      ) {\n        return State.ColliderTop;\n      }\n      if (\n        this.translateY < this.maxTranslateY &&\n        this.colliderTop + this.colliderHeight > this.containerTop + this.translateY + this.containerInner.offsetHeight\n      ) {\n        return State.ColliderBottom;\n      }\n    }\n\n    return State.Rest;\n  }\n\n  /**\n   * Get a {@link strategy} that determines the further behavior of the {@link containerInner}.\n   */\n  private _getStrategy(): Strategy {\n    if (this.containerHeight <= this.containerInner.offsetHeight) return Strategy.None;\n    if (this.colliderHeight < this.containerInner.offsetHeight) return Strategy.Both;\n    return Strategy.Top;\n  }\n\n  /**\n   * Calculate {@link https://developer.mozilla.org/en-US/docs/Web/API/CSS_Object_Model/Determining_the_dimensions_of_elements|dimensions}.\n   */\n  private _calcDims(): void {\n    const containerCoords = this._getCoords(this.container);\n    this.containerLeft = containerCoords.left;\n    this.containerTop = containerCoords.top;\n    this.containerHeight = this.container.clientHeight;\n    this.containerWidth = this.container.clientWidth;\n    this.colliderHeight = window.innerHeight - this.spaceTop - this.spaceBottom;\n    this.maxTranslateY = this.container.clientHeight - this.containerInner.offsetHeight;\n\n    this.strategy = this._getStrategy();\n\n    if (this.strategy === Strategy.None) {\n      if (this.prevStrategy !== this.strategy) this._render(State.None);\n    } else {\n      this._calcScroll();\n    }\n\n    this.prevContainerWidth = this.containerWidth;\n    this.prevContainerLeft = this.containerLeft;\n    this.prevContainerTop = this.containerTop;\n    this.prevElementHeight = this.containerInner.offsetHeight;\n    this.prevStrategy = this.strategy;\n    this.prevSpaceBottom = this.spaceBottom;\n    this.prevSpaceTop = this.spaceTop;\n  }\n\n  /**\n   * Calculate {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSSOM_view/Coordinate_systems|coordinates}.\n   */\n  private _calcScroll(): void {\n    this.colliderTop = window.scrollY + this.spaceTop;\n\n    const state = this._getState(this._getDirection());\n\n    if (state !== State.Rest) {\n      this._render(state);\n      this.prevState = state;\n    }\n\n    this.prevColliderTop = this.colliderTop;\n    this.prevViewportScrollX = window.scrollX;\n    this.prevViewportScrollY = window.scrollY;\n  }\n\n  /**\n   * Helps apply DOM manipulation and synchronize processing with rendering. See {@link https://developer.mozilla.org/en-US/docs/Web/API/Window/requestAnimationFrame|requestAnimationFrame}.\n   */\n  private _request(): void {\n    if (this.isRunningRequest) return;\n    this.isRunningRequest = true;\n    window.requestAnimationFrame(() => {\n      if (this.events[Item.Resize]) {\n        this.events[Item.Resize] = false;\n        this._calcDims();\n      } else if (this.events[Item.Scroll]) {\n        this.events[Item.Scroll] = false;\n        this._calcScroll();\n      }\n      this.isRunningRequest = false;\n    });\n  }\n\n  /**\n   * Observe {@link https://developer.mozilla.org/en-US/docs/Web/API/Node|nodes} from {@link containerInner} to {@link https://developer.mozilla.org/en-US/docs/Web/API/Document/body|document body} with help the {@link https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver|ResizeObserver}.\n   */\n  private _observeTreeNodesFromCurrentToBody(containerInner: HTMLElement): void {\n    while (containerInner) {\n      this.resizeObserver.observe(containerInner);\n      if (containerInner.tagName === 'BODY') break;\n      (containerInner as unknown) = containerInner.parentElement;\n    }\n  }\n\n  /**\n   * Add required event listeners. See {@link https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener|addEventListener} and {@link https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver|ResizeObserver}.\n   */\n  private _addListeners(): void {\n    window.addEventListener('scroll', this._scrollListener, {\n      capture: false,\n      passive: true,\n    });\n    this._observeTreeNodesFromCurrentToBody(this.containerInner);\n  }\n\n  /**\n   * Remove all event listeners. See {@link https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener|removeEventListener} and {@link https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver|ResizeObserver}.\n   */\n  private _removeListeners(): void {\n    window.removeEventListener('scroll', this._scrollListener, {\n      capture: false,\n    });\n    this.resizeObserver.disconnect();\n  }\n}\n\nexport default StickNRoll;\n"],"mappings":"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"}